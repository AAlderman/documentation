{
  "backends": [
    {
      "name": "DatabricksBackend",
      "contracts": [
        "contracts/WIP_SimplePatientDemographics",
        "contracts/WIP_Prescriptions",
        "contracts/WIP_HospitalAdmissions"
      ]
    },
    {
      "name": "GraphnetBackend",
      "contracts": [
        "contracts/PatientDemographics",
        "contracts/WIP_ClinicalEvents",
        "contracts/WIP_PracticeRegistrations",
        "contracts/WIP_CovidTestResults",
        "contracts/WIP_HospitalizationsWithoutSystem",
        "contracts/WIP_PatientAddress"
      ]
    },
    {
      "name": "TPPBackend",
      "contracts": [
        "universal/Patients",
        "contracts/WIP_ClinicalEvents",
        "contracts/WIP_PracticeRegistrations",
        "contracts/WIP_CovidTestResults",
        "contracts/WIP_Hospitalizations",
        "contracts/WIP_PatientAddress"
      ]
    }
  ],
  "contracts": [
    {
      "name": "PatientDemographics",
      "hierarchy": [
        "contracts"
      ],
      "dotted_path": "databuilder.contracts.contracts.PatientDemographics",
      "docstring": [
        "Provides demographic information about patients."
      ],
      "columns": [
        {
          "name": "patient_id",
          "description": "Patient's pseudonymous identifier, for linkage. You should not normally output or operate on this column",
          "type": "PseudoPatientId",
          "constraints": [
            "Must have a value",
            "Must be unique"
          ]
        },
        {
          "name": "date_of_birth",
          "description": "Patient's year and month of birth, provided in format YYYY-MM-01.",
          "type": "Date",
          "constraints": [
            "Must have a value",
            "Must be the first day of a month"
          ]
        },
        {
          "name": "sex",
          "description": "Patient's sex.",
          "type": "Choice",
          "constraints": [
            "Must have a value"
          ]
        },
        {
          "name": "date_of_death",
          "description": "Patient's year and month of death, provided in format YYYY-MM-01.",
          "type": "Date",
          "constraints": [
            "Must be the first day of a month"
          ]
        }
      ],
      "contract_support": []
    },
    {
      "name": "WIP_ClinicalEvents",
      "hierarchy": [
        "contracts"
      ],
      "dotted_path": "databuilder.contracts.contracts.WIP_ClinicalEvents",
      "docstring": [
        "TODO."
      ],
      "columns": [
        {
          "name": "patient_id",
          "description": "",
          "type": "PseudoPatientId",
          "constraints": []
        },
        {
          "name": "code",
          "description": "",
          "type": "Code",
          "constraints": []
        },
        {
          "name": "system",
          "description": "",
          "type": "String",
          "constraints": []
        },
        {
          "name": "date",
          "description": "",
          "type": "Date",
          "constraints": []
        },
        {
          "name": "numeric_value",
          "description": "",
          "type": "Float",
          "constraints": []
        }
      ],
      "contract_support": []
    },
    {
      "name": "WIP_CovidTestResults",
      "hierarchy": [
        "contracts"
      ],
      "dotted_path": "databuilder.contracts.contracts.WIP_CovidTestResults",
      "docstring": [
        "TODO."
      ],
      "columns": [
        {
          "name": "patient_id",
          "description": "",
          "type": "PseudoPatientId",
          "constraints": []
        },
        {
          "name": "date",
          "description": "",
          "type": "Date",
          "constraints": []
        },
        {
          "name": "positive_result",
          "description": "",
          "type": "Boolean",
          "constraints": []
        }
      ],
      "contract_support": []
    },
    {
      "name": "WIP_HospitalAdmissions",
      "hierarchy": [
        "contracts"
      ],
      "dotted_path": "databuilder.contracts.contracts.WIP_HospitalAdmissions",
      "docstring": [
        "TODO."
      ],
      "columns": [
        {
          "name": "patient_id",
          "description": "",
          "type": "PseudoPatientId",
          "constraints": []
        },
        {
          "name": "admission_date",
          "description": "",
          "type": "Date",
          "constraints": []
        },
        {
          "name": "primary_diagnosis",
          "description": "",
          "type": "Code",
          "constraints": []
        },
        {
          "name": "admission_method",
          "description": "",
          "type": "Integer",
          "constraints": []
        },
        {
          "name": "episode_is_finished",
          "description": "",
          "type": "Boolean",
          "constraints": []
        },
        {
          "name": "spell_id",
          "description": "",
          "type": "Integer",
          "constraints": []
        }
      ],
      "contract_support": []
    },
    {
      "name": "WIP_Hospitalizations",
      "hierarchy": [
        "contracts"
      ],
      "dotted_path": "databuilder.contracts.contracts.WIP_Hospitalizations",
      "docstring": [
        "TODO."
      ],
      "columns": [
        {
          "name": "patient_id",
          "description": "",
          "type": "PseudoPatientId",
          "constraints": []
        },
        {
          "name": "date",
          "description": "",
          "type": "Date",
          "constraints": []
        },
        {
          "name": "code",
          "description": "",
          "type": "Code",
          "constraints": []
        },
        {
          "name": "system",
          "description": "",
          "type": "String",
          "constraints": []
        }
      ],
      "contract_support": []
    },
    {
      "name": "WIP_HospitalizationsWithoutSystem",
      "hierarchy": [
        "contracts"
      ],
      "dotted_path": "databuilder.contracts.contracts.WIP_HospitalizationsWithoutSystem",
      "docstring": [
        "TODO."
      ],
      "columns": [
        {
          "name": "patient_id",
          "description": "",
          "type": "PseudoPatientId",
          "constraints": []
        },
        {
          "name": "code",
          "description": "",
          "type": "Code",
          "constraints": []
        }
      ],
      "contract_support": []
    },
    {
      "name": "WIP_PatientAddress",
      "hierarchy": [
        "contracts"
      ],
      "dotted_path": "databuilder.contracts.contracts.WIP_PatientAddress",
      "docstring": [
        "TODO."
      ],
      "columns": [
        {
          "name": "patient_id",
          "description": "",
          "type": "PseudoPatientId",
          "constraints": []
        },
        {
          "name": "patientaddress_id",
          "description": "",
          "type": "Integer",
          "constraints": []
        },
        {
          "name": "date_start",
          "description": "",
          "type": "Date",
          "constraints": []
        },
        {
          "name": "date_end",
          "description": "",
          "type": "Date",
          "constraints": []
        },
        {
          "name": "index_of_multiple_deprivation_rounded",
          "description": "",
          "type": "Integer",
          "constraints": []
        },
        {
          "name": "has_postcode",
          "description": "",
          "type": "Boolean",
          "constraints": []
        }
      ],
      "contract_support": []
    },
    {
      "name": "WIP_PracticeRegistrations",
      "hierarchy": [
        "contracts"
      ],
      "dotted_path": "databuilder.contracts.contracts.WIP_PracticeRegistrations",
      "docstring": [
        "TODO."
      ],
      "columns": [
        {
          "name": "patient_id",
          "description": "",
          "type": "PseudoPatientId",
          "constraints": []
        },
        {
          "name": "pseudo_id",
          "description": "",
          "type": "Integer",
          "constraints": []
        },
        {
          "name": "nuts1_region_name",
          "description": "",
          "type": "String",
          "constraints": []
        },
        {
          "name": "date_start",
          "description": "",
          "type": "Date",
          "constraints": []
        },
        {
          "name": "date_end",
          "description": "",
          "type": "Date",
          "constraints": []
        }
      ],
      "contract_support": []
    },
    {
      "name": "WIP_Prescriptions",
      "hierarchy": [
        "contracts"
      ],
      "dotted_path": "databuilder.contracts.contracts.WIP_Prescriptions",
      "docstring": [
        "TODO."
      ],
      "columns": [
        {
          "name": "patient_id",
          "description": "",
          "type": "PseudoPatientId",
          "constraints": []
        },
        {
          "name": "prescribed_dmd_code",
          "description": "",
          "type": "Code",
          "constraints": []
        },
        {
          "name": "processing_date",
          "description": "",
          "type": "Date",
          "constraints": []
        }
      ],
      "contract_support": []
    },
    {
      "name": "WIP_SimplePatientDemographics",
      "hierarchy": [
        "contracts"
      ],
      "dotted_path": "databuilder.contracts.contracts.WIP_SimplePatientDemographics",
      "docstring": [
        "TODO."
      ],
      "columns": [
        {
          "name": "patient_id",
          "description": "",
          "type": "PseudoPatientId",
          "constraints": [
            "Must be unique"
          ]
        },
        {
          "name": "date_of_birth",
          "description": "",
          "type": "Date",
          "constraints": []
        }
      ],
      "contract_support": []
    },
    {
      "name": "Patients",
      "hierarchy": [
        "universal"
      ],
      "dotted_path": "databuilder.contracts.universal.Patients",
      "docstring": [],
      "columns": [
        {
          "name": "patient_id",
          "description": "Patient's pseudonymous identifier, for linkage.This will not normally be output, or operated on by researchers.",
          "type": "PseudoPatientId",
          "constraints": [
            "Must have a value",
            "Must be unique"
          ]
        },
        {
          "name": "date_of_birth",
          "description": "Patient's year and month of birth, provided in format YYYY-MM-01. The day will always be the first of the month.",
          "type": "Date",
          "constraints": [
            "Must be the first day of a month",
            "Must have a value"
          ]
        },
        {
          "name": "sex",
          "description": "Patient's sex as defined by the options: male, female, intersex, unknown.",
          "type": "Choice",
          "constraints": [
            "Must have a value"
          ]
        },
        {
          "name": "date_of_death",
          "description": "Patient's year and month of death, provided in format YYYY-MM-01.The day will always be the first of the month.",
          "type": "Date",
          "constraints": [
            "Must have a value"
          ]
        }
      ],
      "contract_support": []
    }
  ],
  "specs": [
    {
      "id": "1",
      "title": "Filtering an event frame",
      "sections": [
        {
          "id": "1.1",
          "title": "Including rows",
          "paragraphs": [
            {
              "id": "1.1.1",
              "title": "Take with column",
              "tables": {
                "e": [
                  [
                    "patient",
                    "i1",
                    "b1"
                  ],
                  [
                    "1",
                    "101",
                    "T"
                  ],
                  [
                    "1",
                    "102",
                    "T"
                  ],
                  [
                    "1",
                    "103",
                    ""
                  ],
                  [
                    "2",
                    "201",
                    "T"
                  ],
                  [
                    "2",
                    "202",
                    ""
                  ],
                  [
                    "2",
                    "203",
                    "F"
                  ],
                  [
                    "3",
                    "301",
                    ""
                  ],
                  [
                    "3",
                    "302",
                    "F"
                  ]
                ]
              },
              "series": "e.take(e.b1).i1.sum_for_patient()",
              "output": [
                [
                  "1",
                  "203"
                ],
                [
                  "2",
                  "201"
                ],
                [
                  "3",
                  ""
                ]
              ]
            },
            {
              "id": "1.1.2",
              "title": "Take with expr",
              "tables": {
                "e": [
                  [
                    "patient",
                    "i1",
                    "i2"
                  ],
                  [
                    "1",
                    "101",
                    "111"
                  ],
                  [
                    "1",
                    "102",
                    "112"
                  ],
                  [
                    "1",
                    "103",
                    "113"
                  ],
                  [
                    "2",
                    "201",
                    "211"
                  ],
                  [
                    "2",
                    "202",
                    "212"
                  ],
                  [
                    "2",
                    "203",
                    "213"
                  ],
                  [
                    "3",
                    "301",
                    ""
                  ]
                ]
              },
              "series": "e.take((e.i1 + e.i2) < 413).i1.sum_for_patient()",
              "output": [
                [
                  "1",
                  "306"
                ],
                [
                  "2",
                  "201"
                ],
                [
                  "3",
                  ""
                ]
              ]
            }
          ]
        },
        {
          "id": "1.2",
          "title": "Excluding rows",
          "paragraphs": [
            {
              "id": "1.2.1",
              "title": "Drop with column",
              "tables": {
                "e": [
                  [
                    "patient",
                    "i1",
                    "b1"
                  ],
                  [
                    "1",
                    "101",
                    "T"
                  ],
                  [
                    "1",
                    "102",
                    "T"
                  ],
                  [
                    "1",
                    "103",
                    ""
                  ],
                  [
                    "2",
                    "201",
                    "T"
                  ],
                  [
                    "2",
                    "202",
                    ""
                  ],
                  [
                    "2",
                    "203",
                    "F"
                  ],
                  [
                    "3",
                    "301",
                    "T"
                  ],
                  [
                    "3",
                    "302",
                    "T"
                  ]
                ]
              },
              "series": "e.drop(e.b1).i1.sum_for_patient()",
              "output": [
                [
                  "1",
                  "103"
                ],
                [
                  "2",
                  "405"
                ],
                [
                  "3",
                  ""
                ]
              ]
            },
            {
              "id": "1.2.2",
              "title": "Drop with expr",
              "tables": {
                "e": [
                  [
                    "patient",
                    "i1",
                    "i2"
                  ],
                  [
                    "1",
                    "101",
                    "111"
                  ],
                  [
                    "1",
                    "102",
                    "112"
                  ],
                  [
                    "1",
                    "103",
                    "113"
                  ],
                  [
                    "2",
                    "201",
                    "211"
                  ],
                  [
                    "2",
                    "202",
                    "212"
                  ],
                  [
                    "2",
                    "203",
                    "213"
                  ],
                  [
                    "3",
                    "301",
                    ""
                  ]
                ]
              },
              "series": "e.drop((e.i1 + e.i2) < 413).i1.sum_for_patient()",
              "output": [
                [
                  "1",
                  ""
                ],
                [
                  "2",
                  "405"
                ],
                [
                  "3",
                  "301"
                ]
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "2",
      "title": "Picking one row for each patient from an event frame",
      "sections": [
        {
          "id": "2.1",
          "title": "Picking the first row for each patient",
          "paragraphs": [
            {
              "id": "2.1.1",
              "title": "Sort by column pick first",
              "tables": {
                "e": [
                  [
                    "patient",
                    "i1"
                  ],
                  [
                    "1",
                    "101"
                  ],
                  [
                    "1",
                    "102"
                  ],
                  [
                    "1",
                    "103"
                  ],
                  [
                    "2",
                    "203"
                  ],
                  [
                    "2",
                    "202"
                  ],
                  [
                    "2",
                    "201"
                  ]
                ]
              },
              "series": "e.sort_by(e.i1).first_for_patient().i1",
              "output": [
                [
                  "1",
                  "101"
                ],
                [
                  "2",
                  "201"
                ]
              ]
            }
          ]
        },
        {
          "id": "2.2",
          "title": "Picking the last row for each patient",
          "paragraphs": [
            {
              "id": "2.2.1",
              "title": "Sort by column pick last",
              "tables": {
                "e": [
                  [
                    "patient",
                    "i1"
                  ],
                  [
                    "1",
                    "101"
                  ],
                  [
                    "1",
                    "102"
                  ],
                  [
                    "1",
                    "103"
                  ],
                  [
                    "2",
                    "203"
                  ],
                  [
                    "2",
                    "202"
                  ],
                  [
                    "2",
                    "201"
                  ]
                ]
              },
              "series": "e.sort_by(e.i1).last_for_patient().i1",
              "output": [
                [
                  "1",
                  "103"
                ],
                [
                  "2",
                  "203"
                ]
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "3",
      "title": "Aggregating an event frame",
      "sections": [
        {
          "id": "3.1",
          "title": "Determining whether a row exists for each patient",
          "paragraphs": [
            {
              "id": "3.1.1",
              "title": "Exists for patient",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1"
                  ],
                  [
                    "1",
                    "101"
                  ],
                  [
                    "2",
                    "201"
                  ],
                  [
                    "3",
                    "301"
                  ]
                ],
                "e": [
                  [
                    "patient",
                    "b1"
                  ],
                  [
                    "1",
                    "T"
                  ],
                  [
                    "1",
                    "F"
                  ],
                  [
                    "2",
                    ""
                  ]
                ]
              },
              "series": "e.exists_for_patient()",
              "output": [
                [
                  "1",
                  "T"
                ],
                [
                  "2",
                  "T"
                ],
                [
                  "3",
                  "F"
                ]
              ]
            }
          ]
        },
        {
          "id": "3.2",
          "title": "Counting the rows for each patient",
          "paragraphs": [
            {
              "id": "3.2.1",
              "title": "Count for patient",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1"
                  ],
                  [
                    "1",
                    "101"
                  ],
                  [
                    "2",
                    "201"
                  ],
                  [
                    "3",
                    "301"
                  ]
                ],
                "e": [
                  [
                    "patient",
                    "b1"
                  ],
                  [
                    "1",
                    "T"
                  ],
                  [
                    "1",
                    "F"
                  ],
                  [
                    "2",
                    ""
                  ]
                ]
              },
              "series": "e.count_for_patient()",
              "output": [
                [
                  "1",
                  "2"
                ],
                [
                  "2",
                  "1"
                ],
                [
                  "3",
                  "0"
                ]
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "4",
      "title": "Combining series",
      "sections": [
        {
          "id": "4.1",
          "title": "Combining two patient series",
          "paragraphs": [
            {
              "id": "4.1.1",
              "title": "Patient series and patient series",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1",
                    "i2"
                  ],
                  [
                    "1",
                    "101",
                    "102"
                  ],
                  [
                    "2",
                    "201",
                    "202"
                  ]
                ]
              },
              "series": "(p.i1 + p.i2).sum_for_patient()",
              "output": [
                [
                  "1",
                  "203"
                ],
                [
                  "2",
                  "403"
                ]
              ]
            }
          ]
        },
        {
          "id": "4.2",
          "title": "Combining a patient series with a value",
          "paragraphs": [
            {
              "id": "4.2.1",
              "title": "Patient series and value",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1"
                  ],
                  [
                    "1",
                    "101"
                  ],
                  [
                    "2",
                    "201"
                  ]
                ]
              },
              "series": "(p.i1 + 1).sum_for_patient()",
              "output": [
                [
                  "1",
                  "102"
                ],
                [
                  "2",
                  "202"
                ]
              ]
            },
            {
              "id": "4.2.2",
              "title": "Value and patient series",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1"
                  ],
                  [
                    "1",
                    "101"
                  ],
                  [
                    "2",
                    "201"
                  ]
                ]
              },
              "series": "(1 + p.i1).sum_for_patient()",
              "output": [
                [
                  "1",
                  "102"
                ],
                [
                  "2",
                  "202"
                ]
              ]
            }
          ]
        },
        {
          "id": "4.3",
          "title": "Combining two event series",
          "paragraphs": [
            {
              "id": "4.3.1",
              "title": "Event series and event series",
              "tables": {
                "e": [
                  [
                    "patient",
                    "i1",
                    "i2"
                  ],
                  [
                    "1",
                    "101",
                    "111"
                  ],
                  [
                    "1",
                    "102",
                    "112"
                  ],
                  [
                    "2",
                    "201",
                    "211"
                  ],
                  [
                    "2",
                    "202",
                    "212"
                  ]
                ]
              },
              "series": "(e.i1 + e.i2).sum_for_patient()",
              "output": [
                [
                  "1",
                  "426"
                ],
                [
                  "2",
                  "826"
                ]
              ]
            }
          ]
        },
        {
          "id": "4.4",
          "title": "Combining an event series with a patient series",
          "paragraphs": [
            {
              "id": "4.4.1",
              "title": "Event series and patient series",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1"
                  ],
                  [
                    "1",
                    "101"
                  ],
                  [
                    "2",
                    "201"
                  ]
                ],
                "e": [
                  [
                    "patient",
                    "i1"
                  ],
                  [
                    "1",
                    "111"
                  ],
                  [
                    "1",
                    "112"
                  ],
                  [
                    "2",
                    "211"
                  ],
                  [
                    "2",
                    "212"
                  ]
                ]
              },
              "series": "(e.i1 + p.i1).sum_for_patient()",
              "output": [
                [
                  "1",
                  "425"
                ],
                [
                  "2",
                  "825"
                ]
              ]
            },
            {
              "id": "4.4.2",
              "title": "Patient series and event series",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1"
                  ],
                  [
                    "1",
                    "101"
                  ],
                  [
                    "2",
                    "201"
                  ]
                ],
                "e": [
                  [
                    "patient",
                    "i1"
                  ],
                  [
                    "1",
                    "111"
                  ],
                  [
                    "1",
                    "112"
                  ],
                  [
                    "2",
                    "211"
                  ],
                  [
                    "2",
                    "212"
                  ]
                ]
              },
              "series": "(p.i1 + e.i1).sum_for_patient()",
              "output": [
                [
                  "1",
                  "425"
                ],
                [
                  "2",
                  "825"
                ]
              ]
            }
          ]
        },
        {
          "id": "4.5",
          "title": "Combining an event series with a value",
          "paragraphs": [
            {
              "id": "4.5.1",
              "title": "Event series and value",
              "tables": {
                "e": [
                  [
                    "patient",
                    "i1"
                  ],
                  [
                    "1",
                    "101"
                  ],
                  [
                    "1",
                    "102"
                  ],
                  [
                    "2",
                    "201"
                  ],
                  [
                    "2",
                    "202"
                  ]
                ]
              },
              "series": "(e.i1 + 1).sum_for_patient()",
              "output": [
                [
                  "1",
                  "205"
                ],
                [
                  "2",
                  "405"
                ]
              ]
            },
            {
              "id": "4.5.2",
              "title": "Value and event series",
              "tables": {
                "e": [
                  [
                    "patient",
                    "i1"
                  ],
                  [
                    "1",
                    "101"
                  ],
                  [
                    "1",
                    "102"
                  ],
                  [
                    "2",
                    "201"
                  ],
                  [
                    "2",
                    "202"
                  ]
                ]
              },
              "series": "(1 + e.i1).sum_for_patient()",
              "output": [
                [
                  "1",
                  "205"
                ],
                [
                  "2",
                  "405"
                ]
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "5",
      "title": "Operations on all series",
      "sections": [
        {
          "id": "5.1",
          "title": "Testing for equality",
          "paragraphs": [
            {
              "id": "5.1.1",
              "title": "Equals",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1",
                    "i2"
                  ],
                  [
                    "1",
                    "101",
                    "101"
                  ],
                  [
                    "2",
                    "201",
                    "202"
                  ],
                  [
                    "3",
                    "301",
                    ""
                  ],
                  [
                    "4",
                    "",
                    ""
                  ]
                ]
              },
              "series": "p.i1 == p.i2",
              "output": [
                [
                  "1",
                  "T"
                ],
                [
                  "2",
                  "F"
                ],
                [
                  "3",
                  ""
                ],
                [
                  "4",
                  ""
                ]
              ]
            },
            {
              "id": "5.1.2",
              "title": "Not equals",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1",
                    "i2"
                  ],
                  [
                    "1",
                    "101",
                    "101"
                  ],
                  [
                    "2",
                    "201",
                    "202"
                  ],
                  [
                    "3",
                    "301",
                    ""
                  ],
                  [
                    "4",
                    "",
                    ""
                  ]
                ]
              },
              "series": "p.i1 != p.i2",
              "output": [
                [
                  "1",
                  "F"
                ],
                [
                  "2",
                  "T"
                ],
                [
                  "3",
                  ""
                ],
                [
                  "4",
                  ""
                ]
              ]
            },
            {
              "id": "5.1.3",
              "title": "Is null",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1",
                    "i2"
                  ],
                  [
                    "1",
                    "101",
                    "101"
                  ],
                  [
                    "2",
                    "201",
                    "202"
                  ],
                  [
                    "3",
                    "301",
                    ""
                  ],
                  [
                    "4",
                    "",
                    ""
                  ]
                ]
              },
              "series": "p.i1.is_null()",
              "output": [
                [
                  "1",
                  "F"
                ],
                [
                  "2",
                  "F"
                ],
                [
                  "3",
                  "F"
                ],
                [
                  "4",
                  "T"
                ]
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "6",
      "title": "Operations on boolean series",
      "sections": [
        {
          "id": "6.1",
          "title": "Logical operations",
          "paragraphs": [
            {
              "id": "6.1.1",
              "title": "Not",
              "tables": {
                "p": [
                  [
                    "patient",
                    "b1"
                  ],
                  [
                    "1",
                    "T"
                  ],
                  [
                    "2",
                    ""
                  ],
                  [
                    "3",
                    "F"
                  ]
                ]
              },
              "series": "~p.b1",
              "output": [
                [
                  "1",
                  "F"
                ],
                [
                  "2",
                  ""
                ],
                [
                  "3",
                  "T"
                ]
              ]
            },
            {
              "id": "6.1.2",
              "title": "And",
              "tables": {
                "p": [
                  [
                    "patient",
                    "b1",
                    "b2"
                  ],
                  [
                    "1",
                    "T",
                    "T"
                  ],
                  [
                    "2",
                    "T",
                    ""
                  ],
                  [
                    "3",
                    "T",
                    "F"
                  ],
                  [
                    "4",
                    "",
                    "T"
                  ],
                  [
                    "5",
                    "",
                    ""
                  ],
                  [
                    "6",
                    "",
                    "F"
                  ],
                  [
                    "7",
                    "F",
                    "T"
                  ],
                  [
                    "8",
                    "F",
                    ""
                  ],
                  [
                    "9",
                    "F",
                    "F"
                  ]
                ]
              },
              "series": "p.b1 & p.b2",
              "output": [
                [
                  "1",
                  "T"
                ],
                [
                  "2",
                  ""
                ],
                [
                  "3",
                  "F"
                ],
                [
                  "4",
                  ""
                ],
                [
                  "5",
                  ""
                ],
                [
                  "6",
                  "F"
                ],
                [
                  "7",
                  "F"
                ],
                [
                  "8",
                  "F"
                ],
                [
                  "9",
                  "F"
                ]
              ]
            },
            {
              "id": "6.1.3",
              "title": "Or",
              "tables": {
                "p": [
                  [
                    "patient",
                    "b1",
                    "b2"
                  ],
                  [
                    "1",
                    "T",
                    "T"
                  ],
                  [
                    "2",
                    "T",
                    ""
                  ],
                  [
                    "3",
                    "T",
                    "F"
                  ],
                  [
                    "4",
                    "",
                    "T"
                  ],
                  [
                    "5",
                    "",
                    ""
                  ],
                  [
                    "6",
                    "",
                    "F"
                  ],
                  [
                    "7",
                    "F",
                    "T"
                  ],
                  [
                    "8",
                    "F",
                    ""
                  ],
                  [
                    "9",
                    "F",
                    "F"
                  ]
                ]
              },
              "series": "p.b1 | p.b2",
              "output": [
                [
                  "1",
                  "T"
                ],
                [
                  "2",
                  "T"
                ],
                [
                  "3",
                  "T"
                ],
                [
                  "4",
                  "T"
                ],
                [
                  "5",
                  ""
                ],
                [
                  "6",
                  ""
                ],
                [
                  "7",
                  "T"
                ],
                [
                  "8",
                  ""
                ],
                [
                  "9",
                  "F"
                ]
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "7",
      "title": "Operations on integer series",
      "sections": [
        {
          "id": "7.1",
          "title": "Arithmetic operations",
          "paragraphs": [
            {
              "id": "7.1.1",
              "title": "Negate",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1",
                    "i2"
                  ],
                  [
                    "1",
                    "101",
                    "111"
                  ],
                  [
                    "2",
                    "201",
                    ""
                  ]
                ]
              },
              "series": "-p.i2",
              "output": [
                [
                  "1",
                  "-111"
                ],
                [
                  "2",
                  ""
                ]
              ]
            },
            {
              "id": "7.1.2",
              "title": "Add",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1",
                    "i2"
                  ],
                  [
                    "1",
                    "101",
                    "111"
                  ],
                  [
                    "2",
                    "201",
                    ""
                  ]
                ]
              },
              "series": "p.i1 + p.i2",
              "output": [
                [
                  "1",
                  "212"
                ],
                [
                  "2",
                  ""
                ]
              ]
            },
            {
              "id": "7.1.3",
              "title": "Subtract",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1",
                    "i2"
                  ],
                  [
                    "1",
                    "101",
                    "111"
                  ],
                  [
                    "2",
                    "201",
                    ""
                  ]
                ]
              },
              "series": "p.i1 - p.i2",
              "output": [
                [
                  "1",
                  "-10"
                ],
                [
                  "2",
                  ""
                ]
              ]
            }
          ]
        },
        {
          "id": "7.2",
          "title": "Comparison operations",
          "paragraphs": [
            {
              "id": "7.2.1",
              "title": "Less than",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1",
                    "i2"
                  ],
                  [
                    "1",
                    "101",
                    "201"
                  ],
                  [
                    "2",
                    "201",
                    "201"
                  ],
                  [
                    "3",
                    "301",
                    "201"
                  ],
                  [
                    "4",
                    "",
                    "201"
                  ]
                ]
              },
              "series": "p.i1 < p.i2",
              "output": [
                [
                  "1",
                  "T"
                ],
                [
                  "2",
                  "F"
                ],
                [
                  "3",
                  "F"
                ],
                [
                  "4",
                  ""
                ]
              ]
            },
            {
              "id": "7.2.2",
              "title": "Less than or equal to",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1",
                    "i2"
                  ],
                  [
                    "1",
                    "101",
                    "201"
                  ],
                  [
                    "2",
                    "201",
                    "201"
                  ],
                  [
                    "3",
                    "301",
                    "201"
                  ],
                  [
                    "4",
                    "",
                    "201"
                  ]
                ]
              },
              "series": "p.i1 <= p.i2",
              "output": [
                [
                  "1",
                  "T"
                ],
                [
                  "2",
                  "T"
                ],
                [
                  "3",
                  "F"
                ],
                [
                  "4",
                  ""
                ]
              ]
            },
            {
              "id": "7.2.3",
              "title": "Greater than",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1",
                    "i2"
                  ],
                  [
                    "1",
                    "101",
                    "201"
                  ],
                  [
                    "2",
                    "201",
                    "201"
                  ],
                  [
                    "3",
                    "301",
                    "201"
                  ],
                  [
                    "4",
                    "",
                    "201"
                  ]
                ]
              },
              "series": "p.i1 > p.i2",
              "output": [
                [
                  "1",
                  "F"
                ],
                [
                  "2",
                  "F"
                ],
                [
                  "3",
                  "T"
                ],
                [
                  "4",
                  ""
                ]
              ]
            },
            {
              "id": "7.2.4",
              "title": "Greater than or equal to",
              "tables": {
                "p": [
                  [
                    "patient",
                    "i1",
                    "i2"
                  ],
                  [
                    "1",
                    "101",
                    "201"
                  ],
                  [
                    "2",
                    "201",
                    "201"
                  ],
                  [
                    "3",
                    "301",
                    "201"
                  ],
                  [
                    "4",
                    "",
                    "201"
                  ]
                ]
              },
              "series": "p.i1 >= p.i2",
              "output": [
                [
                  "1",
                  "F"
                ],
                [
                  "2",
                  "T"
                ],
                [
                  "3",
                  "T"
                ],
                [
                  "4",
                  ""
                ]
              ]
            }
          ]
        }
      ]
    }
  ]
}
